import{t as D,j as r,r as j}from"./index-1hkev0sT.js";import{B as v,a as C}from"./ButtonsModal-DwgSUSF5.js";import{B as M}from"./BaseTable-DI_i5Uvm.js";import{M as F}from"./ModalDelete-BZuhmeM_.js";import{u,a as f,I as O}from"./InputField-GuZ0OZJf.js";import{u as t}from"./useUserStore-DERwkIQe.js";import{u as k}from"./schemas-Ch0jrM0J.js";import{C as B}from"./CancelButtonModal-BY77VJ91.js";import"./dayjs.min-Dodf3ejV.js";import"./chevron-right-CQV0O4Z1.js";import"./players-BzdLQVIf.js";import"./costos-porrista-BRwTdeOH.js";import"./es-rjeHZEeQ.js";import"./square-pen-Da5ptJOH.js";import"./eye-Brg_21Lh.js";import"./categorias-BT_gOMst.js";import"./roles-BwQ-Xixw.js";const y=()=>{const o=u(e=>e.modalType),a=u(e=>e.formData),i=u(e=>e.closeModal),c=t(e=>e.loading),s=t(e=>e.users),d=t(e=>e.getDataUsers),n=t(e=>e.addUser),m=t(e=>e.editUser),b=t(e=>e.deleteUser),x=t(e=>e.roles),p=t(e=>e.getDataRoles);return{loadOptions:async()=>{try{return(await p()).map(l=>({value:l.id,label:l.nombre}))}catch(e){return console.error("Error loading roles:",e),[]}},roles:x,getDataRoles:p,users:s,getDataUsers:d,loading:c,handleSubmit:e=>{e.preventDefault();const l=k.safeParse(a);if(!l.success){const U=l.error.flatten().fieldErrors,h=Object.values(U)[0][0];D.error(h);return}const g={...a,rol_id:a.rol_id.value};o==="add"?n(g):o==="edit"&&m(g),i()},handleDelete:(e,l)=>{b(e,l),i()}}},E={generalFields:[{required:!0,type:"text",label:"Nombre",name:"nombre_completo"},{required:!0,type:"text",label:"Celular",name:"celular"},{required:!0,type:"text",label:"Ocupación",name:"ocupacion"},{required:!0,type:"email",label:"Correo",name:"correo"},{required:!0,type:"async",label:"Rol",name:"rol_id"}]},I=()=>{const{view:o,formData:a,handleInputChange:i}=f(),{loadOptions:c}=y();return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:E.generalFields.map(({type:s,label:d,name:n,required:m})=>r.jsx(O,{type:s,label:d,name:n,required:m,value:a[n]||"",onChange:i,disabled:o,loadOptions:c,document:s==="file"&&document,classInput:"md:col-span-6"},n))}),o?r.jsx(B,{}):r.jsx(v,{})]})},S=[{key:"nombre_completo",name:"Nombre"},{key:"celular",name:"Celular"},{key:"ocupacion",name:"Ocupación"},{key:"correo",name:"Correo"},{key:"codigo_acceso",name:"Código"},{key:"rol",name:"Rol"}];function $(){const{modalType:o,currentItem:a}=f(),{users:i,loading:c,getDataUsers:s,handleSubmit:d,handleDelete:n}=y();return j.useEffect(()=>{(async()=>await s())()},[s]),r.jsxs("div",{className:"md:p-4 bg-gray-100",children:[r.jsx(M,{columns:S,data:i,title:"Usuarios",loading:c}),(o==="add"||o==="edit"||o==="view")&&r.jsx(C,{handleSubmit:d,Inputs:r.jsx(I,{})}),o==="delete"&&a&&r.jsx(F,{handleDelete:n})]})}export{$ as default};
