import{f as h,t as u,j as r,r as j}from"./index-1hkev0sT.js";import{B as b,a as x}from"./ButtonsModal-DwgSUSF5.js";import{B as D}from"./BaseTable-DI_i5Uvm.js";import{M as T}from"./ModalDelete-BZuhmeM_.js";import{u as p,a as y,I as F}from"./InputField-GuZ0OZJf.js";import{g as q,r as w,u as M,c as v}from"./costos-porrista-BRwTdeOH.js";import{u as I}from"./useTemporadasStore-D6fgAS8s.js";import{C as B}from"./CancelButtonModal-BY77VJ91.js";import"./dayjs.min-Dodf3ejV.js";import"./chevron-right-CQV0O4Z1.js";import"./players-BzdLQVIf.js";import"./es-rjeHZEeQ.js";import"./square-pen-Da5ptJOH.js";import"./eye-Brg_21Lh.js";import"./categorias-BT_gOMst.js";let C=null;const i=h((s,n)=>({costos:[],loading:!1,getDataCostoJugador:async()=>(s({loading:!0}),new Promise((a,t)=>{try{C?a(n().costos):C=q(e=>{s({costos:e}),a(e)})}catch(e){console.error(e),t(e)}finally{s({loading:!1})}})),addCostoJugador:async a=>{const t=async()=>{try{await v(a)}catch(e){console.error(e)}};u.promise(t(),{loading:"Creando registro...",success:"Registro creado correctamente",error:"Falló al crear el registro."})},editCostoJugador:async a=>{const t=async()=>{try{await M(a.id,a)}catch(e){console.error(e)}};u.promise(t(),{loading:"Actualizando...",success:"Actualizado correctamente",error:"Falló al eliminar."})},deleteCostoJugador:async a=>{const t=async()=>{try{await w(a)}catch(e){console.error(e)}};u.promise(t(),{loading:"Eliminando...",success:"Eliminado correctamente",error:"Falló al eliminar."})}})),f=()=>{const s=I(o=>o.getDataTemporadas),n=p(o=>o.modalType),a=p(o=>o.formData),t=p(o=>o.closeModal),e=i(o=>o.loading),c=i(o=>o.costos),d=i(o=>o.getDataCostoJugador),l=i(o=>o.addCostoJugador),m=i(o=>o.editCostoJugador),J=i(o=>o.deleteCostoJugador);return{costos:c,loading:e,getDataCostoJugador:d,handleSubmit:o=>{o.preventDefault(),n==="add"?l(a):n==="edit"&&m(a),t()},handleDelete:o=>{J(o),t()},loadOptionsTemporadas:async()=>{try{return(await s()).map(g=>({value:g.id,label:g.temporada}))}catch(o){return console.error("Error loading temporadas:",o),[]}}}},E={generalFields:[{required:!0,type:"async",label:"Temporada *",name:"temporadaId"},{required:!0,type:"number",step:"0.01",label:"Costo de inscripción *",name:"inscripcion"},{required:!0,type:"number",step:"0.01",label:"Costo de equipamiento *",name:"equipamiento"},{required:!0,type:"number",step:"0.01",label:"Costo de pesaje *",name:"pesaje"}]},S=()=>{const{view:s,formData:n,handleInputChange:a}=y(),{loadOptionsTemporadas:t}=f();return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:E.generalFields.map(({type:e,label:c,name:d,required:l,step:m})=>r.jsx(F,{type:e,label:c,name:d,required:l,step:m,value:n[d]||"",onChange:a,disabled:s,loadOptions:t,classInput:"md:col-span-6"},d))}),s?r.jsx(B,{}):r.jsx(b,{})]})},O=[{key:"temporada",name:"Temporada"},{key:"inscripcion",name:"Costo de inscripción"},{key:"equipamiento",name:"Costo de equipamiento"},{key:"pesaje",name:"Costo de pesaje"}];function $(){const{modalType:s,currentItem:n}=y(),{costos:a,loading:t,getDataCostoJugador:e,handleSubmit:c,handleDelete:d}=f();return j.useEffect(()=>{(async()=>await e())()},[e]),r.jsxs("div",{className:"md:p-4 bg-gray-100",children:[r.jsx(D,{columns:O,data:a,title:"Costos de jugador por temporada",loading:t}),(s==="add"||s==="edit"||s==="view")&&r.jsx(x,{handleSubmit:c,Inputs:r.jsx(S,{})}),s==="delete"&&n&&r.jsx(T,{handleDelete:d})]})}export{$ as default};
