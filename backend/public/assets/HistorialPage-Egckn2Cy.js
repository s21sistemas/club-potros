import{f as m,t as p,j as o,r as u}from"./index-Bo_1Zqy6.js";import{B as g}from"./BaseTable-CG0hieRc.js";import{u as h,I as n,a as f}from"./InputField-Bgiqn5r0.js";import{g as b,r as x}from"./historial-K5E-8qry.js";import{M as y}from"./ModalDelete-C1zEzITC.js";import{A as j}from"./AlertaCard-Y7DSOmzU.js";import{u as H}from"./useReports-feVwTBxo.js";import"./dayjs.min-C6mA835O.js";import"./chevron-right-BHG4n6AS.js";import"./players-CfGsYTWQ.js";import"./es-BFm7WDBc.js";import"./square-pen-C_HaDAF2.js";import"./eye-DdfdWaaB.js";import"./categorias-DKNPRs5G.js";import"./useBankStore-D-aMFBbt.js";import"./useTemporadasStore-CRYStg82.js";import"./useProveedorStore-C1sFJJ5E.js";let d=null;const l=m((r,i)=>({historial:[],loading:!1,getDataHistorial:async()=>(r({loading:!0}),new Promise((a,s)=>{try{d?a(i().historial):d=b(e=>{r({historial:e}),a(e)})}catch(e){console.error(e),s(e)}finally{r({loading:!1})}})),deleteHistorial:async a=>{const s=async()=>{try{await x(a)}catch(e){console.error(e)}};p.promise(s(),{loading:"Elimiando...",success:"Eliminado correctamente",error:"Falló al eliminar."})}})),v=()=>{const r=h(t=>t.closeModal),i=l(t=>t.loading),a=l(t=>t.historial),s=l(t=>t.getDataHistorial),e=l(t=>t.deleteHistorial);return{historial:a,loading:i,getDataHistorial:s,handleDelete:t=>{e(t),r()}}},_=()=>{const{generarReporteHistorialPagos:r,handleInputChange:i,formReport:a}=H(),s=e=>{e.preventDefault(),r(a)};return o.jsxs("form",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6 mt-3",onSubmit:s,children:[o.jsx(n,{label:"Fecha inicio",id:"fecha_inicio",name:"fecha_inicio",type:"date",required:!0,value:a.fecha_inicio,onChange:i,classInput:"md:col-span-3"}),o.jsx(n,{label:"Fecha fin",id:"fecha_fin",name:"fecha_fin",type:"date",required:!0,value:a.fecha_fin,onChange:i,classInput:"md:col-span-3"}),o.jsx(n,{label:"Selecciona el método de pago",id:"metodo_pago",name:"metodo_pago",type:"select",required:!0,value:a.metodo_pago,onChange:i,opcSelect:[{value:"",label:"Selecciona una opción"},{value:"todos",label:"Todos"},{value:"transferencia bancaria",label:"Transferencia bancaria"},{value:"tarjeta",label:"Tarjeta de crédito/débito"},{value:"efectivo",label:"Efectivo"},{value:"cheques",label:" Cheques"}],classInput:"md:col-span-6"}),o.jsx("div",{className:"md:col-span-6 sm:col-span-6",children:o.jsx("button",{className:"rounded-sm text-white font-medium py-2 px-3 bg-[#3674B5] hover:bg-[#486483] transition-all cursor-pointer",children:"Generar reporte"})})]})},D=()=>o.jsxs("div",{className:"mt-6 bg-white p-4 rounded-xl mx-auto",children:[o.jsx(j,{text:"Generar reporte del historial de pagos"}),o.jsx(_,{})]}),C=[{key:"coordinadora",name:"Coordinadora"},{key:"nombre",name:"Jugador/Porrista"},{key:"concepto",name:"Concepto"},{key:"metodo_pago",name:"Método"},{key:"fecha_pago",name:"Fecha recibido en caja"},{key:"monto",name:"Monto"},{key:"fecha_recibido",name:"Fecha entregado"}];function K(){const{modalType:r,currentItem:i}=f(),{historial:a,loading:s,getDataHistorial:e,handleDelete:c}=v();return u.useEffect(()=>{(async()=>await e())()},[e]),o.jsxs("div",{className:"md:p-4 bg-gray-100",children:[o.jsx(g,{columns:C,data:a,title:"Historial de pagos",loading:s}),r==="delete"&&i&&o.jsx(y,{handleDelete:c}),o.jsx(D,{})]})}export{K as default};
