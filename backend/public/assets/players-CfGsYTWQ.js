import{h as l,e as s,u as m,T as g,k as i,d,o as _,i as b,n as y,q as f,w as h,p as w}from"./index-Bo_1Zqy6.js";import{d as j}from"./dayjs.min-C6mA835O.js";const u=d(s,"jugadores"),D=d(s,"pagos_jugadores"),Y=async e=>{try{const a={...e,fecha_registro:g.now()},o=(await i(u,a)).id,r=`${e.nombre} ${e.apellido_p} ${e.apellido_m}`,n=e.temporadaId,c=e.categoria;return await I(o,r,n,c),o}catch(a){console.error("Error al agregar jugador:",a)}},E=async e=>_(u,async a=>{const t=await Promise.all(a.docs.map(async o=>{const r=await p(o.data().uid),n=`${o.data().nombre} ${o.data().apellido_p} ${o.data().apellido_m}`;return{...o.data(),id:o.id,nombre_completo:n,uid:{value:o.data().uid,label:r==null?void 0:r.nombre_completo}}}));e(t)}),R=async e=>{try{const a=l(s,"jugadores",e),t=await y(a);if(t.exists()){const o=t.data(),r=await p(o.uid),n=`${o.nombre} ${o.apellido_p} ${o.apellido_m}`;return{...o,id:t.id,nombre_completo:n,uid:{value:o.uid,label:r==null?void 0:r.nombre_completo}}}else return console.warn("No se encontró el jugador con ese ID"),null}catch(a){return console.error("Error al obtener el jugador:",a),null}},q=async(e,a)=>{try{const t=l(s,"jugadores",e);await m(t,a)}catch(t){console.error("Error al actualizar jugador:",t)}},N=async e=>{try{const a=l(s,"jugadores",e);await b(a)}catch(a){console.error("Error al eliminar jugador:",a)}},p=async e=>{try{const a=d(s,"usuarios"),t=f(a,h("uid","==",e)),o=await w(t);return o.empty?(console.log("No se encontró un usuario con ese ID."),null):o.docs[0].data()}catch(a){return console.error("Error buscando usuario:",a),null}},I=async(e,a,t,o)=>{const r=j(),n=r.add(1,"week").format("YYYY/MM/DD"),c={jugadorId:e,nombre:a,temporadaId:t,categoria:o,pagos:[{tipo:"Inscripción",beca:"0",descuento:"0",estatus:"pendiente",fecha_pago:null,submonto:500,monto:500,prorroga:!1,fecha_limite:n,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0},{tipo:"Equipamiento",estatus:"pendiente",fecha_pago:null,fecha_limite:null,monto:500,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0},{tipo:"Pesaje",estatus:"pendiente",fecha_pago:null,monto:500,metodo_pago:null,abono:"NO",abonos:[],total_abonado:0}],monto_total_pagado:0,monto_total_pendiente:2e3,monto_total:2e3,fecha_registro:r.format("YYYY-MM-DD")};await i(D,c)};export{R as a,Y as c,E as g,N as r,q as u};
